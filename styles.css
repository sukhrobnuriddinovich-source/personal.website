// Basic theme toggle + remembers preference
const btn = document.getElementById('themeToggle');
const root = document.documentElement;
function setTheme(t){ document.body.setAttribute('data-theme', t); localStorage.setItem('site-theme', t); btn.textContent = (t==='dark') ? 'â˜€ï¸' : 'ðŸŒ™'; }
btn.addEventListener('click', ()=>{ setTheme(document.body.getAttribute('data-theme')==='dark' ? 'light' : 'dark'); });
const saved = localStorage.getItem('site-theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
setTheme(saved);


// Small helper: highlight current nav section when scrolling
const links = document.querySelectorAll('nav a');
const sections = [...document.querySelectorAll('main section')];
function onScroll(){
const top = window.scrollY + 140;
let current = sections.find(s => s.offsetTop <= top && (s.offsetTop + s.offsetHeight) > top);
links.forEach(a => a.style.opacity = '0.9');
if(current){
const id = current.id;
const active = document.querySelector(`nav a[href='#${id}']`);
if(active) active.style.opacity = '1';
}
}
window.addEventListener('scroll', onScroll);
onScroll();


// Small progressive enhancement: replace placeholder images with real ones when user is on fast connection
if(navigator.connection && navigator.connection.effectiveType && ['4g','wifi'].includes(navigator.connection.effectiveType)){
document.querySelectorAll('img').forEach(img=>{
const src = img.src;
if(src.includes('placehold.co')) img.src = src.replace('placehold.co/600x400?text=','https://images.unsplash.com/photo-');
});
}